# Improve Performance of edit mode initialization
When i have an object that has a lot of vertices (> 20, which isn't a lot if you think about it..) it freezes the app for a couple seconds (5-8) while it probably calculates which vertices, edges etc. to render?

In any case, it is very, very slow, i can't imagine what happens if it has hundreds of vertices.

Figure out if:
- calculations are the problem, if so, find faster algorithms
- rendering is the problem, if so, use instanced meshing in r3f
- something entirely different is, report back to me and fix it without confirmation

-----------------

I'll scan the codebase for hotspots around vertex/edge computations and rendering to identify likely bottlenecks before changing code; then I'll run the dev server locally to reproduce and profile if possible.

I'll read key rendering components and geometry utilities to pinpoint any obvious O(n^2) work or object churn, focusing on mesh-view.tsx, vertex-renderer.tsx, edge-renderer.tsx, and face-renderer.tsx.

Read mesh-view.tsx

Read vertex-renderer.tsx

Read edge-renderer.tsx

Read face-renderer.tsx

Read tool-handler.tsx

Read geometry-store.ts

Making targeted edits to merge per-edge/face/vertex draw calls and reduce object churn for rendering overlays; this should cut GC pauses and improve responsiveness even with many vertices.

vertex-renderer.tsx+82-29
Checked vertex-renderer.tsx, no problems found

Next, I'll collapse many per-edge and per-face objects into batched buffer geometries to further cut draw calls and allocations, and cache face/edge buffers with stable refs.

edge-renderer.tsx+64-44
Checked edge-renderer.tsx, no problems found

I'll also batch face rendering into a single geometry per selection state to reduce mesh count and avoid per-face allocations.

face-renderer.tsx+52-32
Checked face-renderer.tsx, no problems found

Checked background terminal output

I'll add face-triangle-to-faceId mapping so clicking a triangle selects the correct face, and improve edge picking to use event.index when available for O(1) lookup.

face-renderer.tsx+25-5
Checked face-renderer.tsx, no problems found

I'll quickly check package.json to see scripts and run a typecheck/build to validate compile-time correctness.

Read package.json

Read eslint.config.mjs

vertex-renderer.tsx+11-10
edge-renderer.tsx+7-10
face-renderer.tsx+7-12
I'll open edit-mode-overlay.tsx to verify the conditional hook usage and decide whether to refactor or bypass lint for now.

Read edit-mode-overlay.tsx

vertex-renderer.tsx+1-1
edge-renderer.tsx+1-1
face-renderer.tsx+1-1
face-renderer.tsx+4-4
mesh-view.tsx+4-4
mesh-view.tsx+0-1
edit-mode-overlay.tsx+14-15
Read edge-renderer.tsx

face-renderer.tsx+1-1
edge-renderer.tsx+1-1
Read mesh-view.tsx

Read edit-mode-overlay.tsx, lines 100 to 130

Read vertex-renderer.tsx

mesh-view.tsx+3-1
edge-renderer.tsx+2-2
face-renderer.tsx+3-8
edit-mode-overlay.tsx+1-1
Read face-renderer.tsx

face-renderer.tsx+4-4
geometry-store.ts+2-0
npm run dev
