# Time for the next vertical?
Alright, i really want this to work at some point, but tbh i'm very scared of it's complexity and maintenance in the long run - but nevertheless we'll try! The idea is to have a node-based graph editor for threejs shading language (TSL)

So similar to blender's node editor (shader editor) but for threejs land.

My initial test will be based on react-flow, let's roll the dice and see what we get!

## Prompt
Task: Build a robust node based shader system for materials. The nodes that exist are exactly the ones that threejs shader language (TSL) allows.

User Interactions:
 - Users can open / close a shader-editor panel which floats on the bottom half of the screen, full width, slightly transparent with backdrop blur
 - In the Shader Editor, they can create new materials, which always have a predefined input and output node that cannot be deleted.
 - Inside one material in the editor, users can create arbitrary complex materials by combining nodes
 - Nodes have inputs and outputs
 - some nodes may have inputs inside them, such as numerical values, later (not in this scope) files, img textures, etc.
 - they can connect outputs to inputs of nodes but only if compatible (numeric out -> numeric in)

Interface:
 - Keep the minimalistic monotonic dark soothing interface. do not add any colorful elements.

State Management:
 - All nodes MUST be stored in the geometry-store, same way modifiers and geometries themselves
 - The current material system is quite rigid and may have to be reworked to allow for more sophisticated node based systems

Rendering:
 - The changes in a material in the node editor are directly reflected in the meshes that have that material attached to them
 - On the render layer, a special hook useMaterialNodes(config) returns a full TSL compatible material definition to be used with standardnodematerials in react three fiber
 - the hook itself calls a utility function that does the heavy lifting of turning our state definitions into valid tsl calls

 Notes:
  - Make sure to use react-flow as the core engine for the node editor
  - For simplicity start small by adding a few node types first, i'll let you know when to create all the rest



